<!DOCTYPE html>
<html>
    <head>
        <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    </head>
    <body>
        <textarea id="source"> </textarea>
        <textarea id="input"></textarea>
        <button onClick="compile()">compileProgram</button>
        <button onClick="run()">run</button>
        <button onClick="giveInput()">giveInput</button>
        <button onClick="getStdOut()">output</button>
        <script type="text/javascript">

            function showresponse(data)
            {
                alert(JSON.stringify(data));
            }

            function compile()
            {
                submitCommand("prepare", "1", "1", $("#source").val(), showresponse);
            }

            function run()
            {
                submitCommand("run", "1", "1", "", showresponse);
            }
            
            function giveInput()
            {
                submitCommand("giveinput", "1", "1", $("#input").val(), showresponse);
            }

            function getStdOut()
            {
                submitCommand("getstdout", "1", "1", "", showresponse);
            }

            function submitCommand(call, usrid, dbgid, data, callback)
            {
                $.post("http://localhost:6789",
                    {
                        "call"  : call,
                        "usrid" : usrid,
                        "dbgid" : dbgid,
                        "data"  : data
                    }, callback, "json");
            }


        </script>
    </body>
</html>
